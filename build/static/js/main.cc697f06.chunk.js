(this["webpackJsonpconsume-weather-and-shazam"]=this["webpackJsonpconsume-weather-and-shazam"]||[]).push([[0],{128:function(e,t,i){"use strict";i.r(t);var c=i(0),n=i.n(c),a=i(38),r=i.n(a),s=i(154),o=i(56),l=i(3),d=i(152),u=i(142),j=i(156),b=i(143),h=i(144),m=i(145),p=i(42),x=i.n(p),O=i.p+"static/media/block.64d85bbf.png",f=i(4),g="https://api.openweathermap.org/data/2.5/weather",v=Object(c.createContext)({loading:!1,weather:{}}),y=function(e){var t=e.children,i=Object(d.a)(),n=Object(c.useState)(),a=Object(l.a)(n,2),r=a[0],s=a[1],o=Object(c.useState)(!1),p=Object(l.a)(o,2),y=p[0],S=p[1],w=Object(c.useState)(!1),z=Object(l.a)(w,2),C=z[0],E=z[1],W=function(e,t){return i({title:e,description:t,status:"error",duration:5e3,isClosable:!0,variant:"top-accent",position:"top-right"})},B=function(e){var t,i;S(!0),(t=e.coords.latitude,i=e.coords.longitude,x.a.get(g,{params:{lat:t,lon:i,appid:"8738e03effc040bc075baa2cea0debdb",lang:"pt",units:"metric"}})).then((function(e){return s(e.data)})).catch((function(e){return W("Error getting Weather",e.message)})).finally((function(){return S(!1)})),E(!0)};if(Object(c.useEffect)((function(){navigator.geolocation.getCurrentPosition(B,(function(){return W("Error getting location","Voc\xea precisa habilitar sua localiza\xe7\xe3o")}))}),[]),!C)return Object(f.jsxs)(u.a,{my:8,flexDirection:"column",children:[Object(f.jsx)(j.a,{src:O,height:"100px"}),Object(f.jsx)(b.a,{fontSize:"2xl",mt:4,children:"Voc\xea precisa habilitar sua localiza\xe7\xe3o"}),Object(f.jsxs)(h.a,{children:["Em seguida"," ",Object(f.jsx)(m.a,{href:"/",colorScheme:"blue",color:"blue.600",fontWeight:"semibold",textDecoration:"underline",children:"atualize a pagina"})]})]});var T={loading:y,weather:r,submitSearchByCity:function(e){e&&(S(!0),function(e){return x.a.get(g,{params:{q:e,appid:"8738e03effc040bc075baa2cea0debdb",lang:"pt",units:"metric"}})}(e).then((function(e){s(e.data)})).catch((function(e){return W("Error getting Weather",e.message)})).finally((function(){return S(!1)})))}};return Object(f.jsx)(v.Provider,{value:T,children:t})},S=i(148),w=i(85),z=i(158),C=i(45),E=i(151),W=i(159),B=i(155),T=i(88),M=function(){return Object(c.useContext)(v)},R=i(157);var k=function(){return Object(f.jsx)(u.a,{my:8,width:"full",children:Object(f.jsx)(R.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"})})},I=function(e){var t=e.local,i=e.description,c=e.temperature;return Object(f.jsxs)(z.b,{spacing:4,alignItems:"flex-start",children:[Object(f.jsxs)(z.a,{spacing:[2,4],direction:["column","row"],children:[Object(f.jsx)(h.a,{fontSize:"xl",children:"Clima na localiza\xe7\xe3o:"}),Object(f.jsxs)(b.a,{fontSize:"2xl",children:[t,"(",i,")"]})]}),Object(f.jsxs)(z.a,{spacing:[2,4],direction:["column","row"],children:[Object(f.jsx)(h.a,{fontSize:"lg",children:"Temperatura atual:"}),Object(f.jsxs)(b.a,{fontSize:"lg",children:[c,"\xb0"]})]})]})},P=function(){var e=Object(T.a)(),t=e.register,i=e.handleSubmit,n=e.setValue,a=M(),r=a.loading,s=a.weather,o=a.submitSearchByCity;return Object(c.useEffect)((function(){(null===s||void 0===s?void 0:s.name)&&n("city",null===s||void 0===s?void 0:s.name)}),[s]),Object(f.jsx)(u.a,{my:8,children:Object(f.jsxs)(S.a,{width:"full",px:8,children:[!!r&&Object(f.jsx)(k,{}),!r&&!!s&&Object(f.jsx)(I,{temperature:s.main.temp,local:s.name,description:s.weather[0].description}),Object(f.jsx)(S.a,{mt:8,children:Object(f.jsx)("form",{onSubmit:i((function(e){return o(e.city)})),children:Object(f.jsxs)(z.a,{spacing:[4,4],direction:["column","row"],alignItems:"end",children:[Object(f.jsxs)(C.a,{id:"city",isRequired:!0,children:[Object(f.jsx)(E.a,{htmlFor:"city",children:"Buscar por cidade:"}),Object(f.jsx)(W.a,Object(w.a)({id:"city",type:"text",placeholder:"Digite o nome de uma cidade"},t("city",{required:!0})))]}),Object(f.jsx)(B.a,{type:"submit",colorScheme:"blue",isLoading:r,width:["full","xs"],children:"Buscar"})]})})})]})})},q=i(153),D=i(160),V=Object(c.createContext)({loading:!1,playlist:[]}),A=function(e){var t=e.children,i=Object(d.a)(),n=Object(c.useState)([]),a=Object(l.a)(n,2),r=a[0],s=a[1],o=Object(c.useState)(!1),u=Object(l.a)(o,2),j=u[0],b=u[1],h={loading:j,playlist:r,getMusicByTemperature:function(e){if(e){b(!0);var t,c={method:"GET",url:"https://shazam-core.p.rapidapi.com/v1/charts/genre-world",params:{genre_code:(t=e,t<16?"ALTERNATIVE":t<24&&t>16?"COUNTRY":t<32&&t>24?"POP":"ROCK"),limit:"10"},headers:{"x-rapidapi-host":"shazam-core.p.rapidapi.com","x-rapidapi-key":"23c098e44cmsh1744e6261cb7efep1c74a3jsn5bb6a8169eb2"}};x.a.request(c).then((function(e){s(e.data)})).catch((function(e){var t,c;t="Error getting Musics",c=e.message,i({title:t,description:c,status:"error",duration:5e3,isClosable:!0,variant:"top-accent",position:"top-right"})})).finally((function(){return b(!1)}))}}};return Object(f.jsx)(V.Provider,{value:h,children:t})},_=function(){return Object(c.useContext)(V)};var F=function(){var e=_(),t=e.playlist,i=e.loading,n=e.getMusicByTemperature,a=M().weather;return Object(c.useEffect)((function(){var e,t;(null===a||void 0===a||null===(e=a.main)||void 0===e?void 0:e.temp)&&n(null===a||void 0===a||null===(t=a.main)||void 0===t?void 0:t.temp)}),[a]),Object(f.jsxs)(q.e,{isFitted:!0,variant:"enclosed",children:[Object(f.jsxs)(q.b,{mb:"1em",children:[Object(f.jsx)(q.a,{_focus:{outline:"none"},fontWeight:"semibold",children:"Musicas Recomendadas"}),Object(f.jsx)(q.a,{_focus:{outline:"none"},fontWeight:"semibold",children:"Musicas Salvas"})]}),Object(f.jsxs)(q.d,{children:[Object(f.jsxs)(q.c,{children:[!!i&&Object(f.jsx)(k,{}),Object(f.jsx)(D.a,{columns:[1,3],spacing:10,children:!i&&t.map((function(e){return Object(f.jsxs)(u.a,{p:2,maxWidth:"sm",flexDirection:"column",borderColor:"gray.100",borderWidth:"1px",borderRadius:"md",children:[Object(f.jsx)(j.a,{src:e.images.coverart,height:"250px"}),Object(f.jsxs)(z.b,{mt:4,maxWidth:"250px",width:"250px",alignItems:"baseline",as:m.a,href:e.url,children:[Object(f.jsx)(b.a,{as:"h4",fontSize:"lg",children:e.title}),Object(f.jsxs)(h.a,{children:["Autor:"," ",e.subtitle]})]})]},e.id)}))})]}),Object(f.jsx)(q.c,{children:Object(f.jsx)("p",{children:"two!"})})]})]})},J=function(){return Object(f.jsxs)(S.a,{children:[Object(f.jsx)(P,{}),Object(f.jsx)(F,{})]})};var L=function(){return Object(f.jsx)(s.a,{resetCSS:!0,theme:o.theme,children:Object(f.jsx)(y,{children:Object(f.jsx)(A,{children:Object(f.jsx)(J,{})})})})};r.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(L,{})}),document.getElementById("root"))}},[[128,1,2]]]);
//# sourceMappingURL=main.cc697f06.chunk.js.map