(this["webpackJsonpconsume-weather-and-shazam"]=this["webpackJsonpconsume-weather-and-shazam"]||[]).push([[0],{128:function(e,t,c){"use strict";c.r(t);var i=c(0),a=c.n(i),n=c(38),r=c.n(n),s=c(155),o=c(56),l=c(3),d=c(153),u=c(142),j=c(157),b=c(143),h=c(144),m=c(145),p=c(42),O=c.n(p),x=c.p+"static/media/block.64d85bbf.png",f=c(4),g="https://api.openweathermap.org/data/2.5/weather",v=Object(i.createContext)({loading:!1,weather:{}}),y=function(e){var t=e.children,c=Object(d.a)(),a=Object(i.useState)(),n=Object(l.a)(a,2),r=n[0],s=n[1],o=Object(i.useState)(!1),p=Object(l.a)(o,2),y=p[0],S=p[1],w=Object(i.useState)(!1),z=Object(l.a)(w,2),C=z[0],E=z[1],W=function(e,t){return c({title:e,description:t,status:"error",duration:5e3,isClosable:!0,variant:"top-accent",position:"top-right"})},B=function(e){var t,c;S(!0),(t=e.coords.latitude,c=e.coords.longitude,O.a.get(g,{params:{lat:t,lon:c,appid:"8738e03effc040bc075baa2cea0debdb",lang:"pt",units:"metric"}})).then((function(e){return s(e.data)})).catch((function(e){return W("Error getting Weather",e.message)})).finally((function(){return S(!1)})),E(!0)};if(Object(i.useEffect)((function(){navigator.geolocation.getCurrentPosition(B,(function(){return W("Error getting location","Voc\xea precisa habilitar sua localiza\xe7\xe3o")}))}),[]),!C)return Object(f.jsxs)(u.a,{my:8,flexDirection:"column",children:[Object(f.jsx)(j.a,{src:x,height:"100px"}),Object(f.jsx)(b.a,{fontSize:"2xl",mt:4,children:"Voc\xea precisa habilitar sua localiza\xe7\xe3o"}),Object(f.jsxs)(h.a,{children:["Em seguida"," ",Object(f.jsx)(m.a,{href:"/",colorScheme:"blue",color:"blue.600",fontWeight:"semibold",textDecoration:"underline",children:"atualize a pagina"})]})]});var T={loading:y,weather:r,submitSearchByCity:function(e){e&&(S(!0),function(e){return O.a.get(g,{params:{q:e,appid:"8738e03effc040bc075baa2cea0debdb",lang:"pt",units:"metric"}})}(e).then((function(e){s(e.data)})).catch((function(e){return W("Error getting Weather",e.message)})).finally((function(){return S(!1)})))}};return Object(f.jsx)(v.Provider,{value:T,children:t})},S=c(148),w=c(85),z=c(159),C=c(45),E=c(151),W=c(160),B=c(156),T=c(88),M=function(){return Object(i.useContext)(v)},R=c(158);var k=function(){return Object(f.jsx)(u.a,{my:8,width:"full",children:Object(f.jsx)(R.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"})})},P=function(e){var t=e.local,c=e.description,i=e.temperature;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(z.a,{spacing:4,children:[Object(f.jsx)(h.a,{fontSize:"xl",children:"Clima na localiza\xe7\xe3o:"}),Object(f.jsxs)(b.a,{fontSize:"2xl",children:[t,"(",c,")"]})]}),Object(f.jsxs)(z.a,{spacing:4,children:[Object(f.jsx)(h.a,{fontSize:"lg",children:"Temperatura atual:"}),Object(f.jsxs)(b.a,{fontSize:"lg",children:[i,"\xb0"]})]})]})},q=function(){var e=Object(T.a)(),t=e.register,c=e.handleSubmit,a=e.setValue,n=M(),r=n.loading,s=n.weather,o=n.submitSearchByCity;return Object(i.useEffect)((function(){(null===s||void 0===s?void 0:s.name)&&a("city",null===s||void 0===s?void 0:s.name)}),[s]),Object(f.jsx)(u.a,{my:8,children:Object(f.jsxs)(S.a,{width:"full",px:8,children:[!!r&&Object(f.jsx)(k,{}),!r&&!!s&&Object(f.jsx)(P,{temperature:s.main.temp,local:s.name,description:s.weather[0].description}),Object(f.jsx)(S.a,{mt:8,children:Object(f.jsx)("form",{onSubmit:c((function(e){return o(e.city)})),children:Object(f.jsxs)(z.a,{spacing:4,alignItems:"end",children:[Object(f.jsxs)(C.a,{id:"city",isRequired:!0,children:[Object(f.jsx)(E.a,{htmlFor:"city",children:"Buscar por cidade:"}),Object(f.jsx)(W.a,Object(w.a)({id:"city",type:"text",placeholder:"Digite o nome de uma cidade"},t("city",{required:!0})))]}),Object(f.jsx)(B.a,{type:"submit",colorScheme:"blue",isLoading:r,children:"Buscar"})]})})})]})})},D=c(154),I=c(161),V=c(152),A=Object(i.createContext)({loading:!1,playlist:[]}),F=function(e){var t=e.children,c=Object(d.a)(),a=Object(i.useState)([]),n=Object(l.a)(a,2),r=n[0],s=n[1],o=Object(i.useState)(!1),u=Object(l.a)(o,2),j=u[0],b=u[1],h={loading:j,playlist:r,getMusicByTemperature:function(e){if(e){b(!0);var t,i={method:"GET",url:"https://shazam-core.p.rapidapi.com/v1/charts/genre-world",params:{genre_code:(t=e,t<16?"ALTERNATIVE":t<24&&t>16?"COUNTRY":t<32&&t>24?"POP":"ROCK"),limit:"10"},headers:{"x-rapidapi-host":"shazam-core.p.rapidapi.com","x-rapidapi-key":"23c098e44cmsh1744e6261cb7efep1c74a3jsn5bb6a8169eb2"}};O.a.request(i).then((function(e){s(e.data)})).catch((function(e){var t,i;t="Error getting Musics",i=e.message,c({title:t,description:i,status:"error",duration:5e3,isClosable:!0,variant:"top-accent",position:"top-right"})})).finally((function(){return b(!1)}))}}};return Object(f.jsx)(A.Provider,{value:h,children:t})},_=function(){return Object(i.useContext)(A)};var J=function(){var e=_(),t=e.playlist,c=e.loading,a=e.getMusicByTemperature,n=M().weather;return Object(i.useEffect)((function(){var e,t;(null===n||void 0===n||null===(e=n.main)||void 0===e?void 0:e.temp)&&a(null===n||void 0===n||null===(t=n.main)||void 0===t?void 0:t.temp)}),[n]),Object(f.jsxs)(D.e,{isFitted:!0,variant:"enclosed",children:[Object(f.jsxs)(D.b,{mb:"1em",children:[Object(f.jsx)(D.a,{_focus:{outline:"none"},fontWeight:"semibold",children:"Musicas Recomendadas"}),Object(f.jsx)(D.a,{_focus:{outline:"none"},fontWeight:"semibold",children:"Musicas Salvas"})]}),Object(f.jsxs)(D.d,{children:[Object(f.jsx)(D.c,{children:Object(f.jsxs)(I.a,{columns:3,spacing:10,children:[!!c&&Object(f.jsx)(k,{}),!c&&t.map((function(e){return Object(f.jsxs)(u.a,{p:2,maxWidth:"sm",flexDirection:"column",borderColor:"gray.100",borderWidth:"1px",borderRadius:"md",children:[Object(f.jsx)(j.a,{src:e.images.coverart,height:"250px"}),Object(f.jsx)(V.a,{children:Object(f.jsxs)(z.b,{mt:4,maxWidth:"250px",width:"250px",alignItems:"baseline",as:m.a,href:e.url,children:[Object(f.jsx)(b.a,{as:"h4",fontSize:"lg",children:e.title}),Object(f.jsxs)(h.a,{children:["Autor:"," ",e.subtitle]})]})})]},e.id)}))]})}),Object(f.jsx)(D.c,{children:Object(f.jsx)("p",{children:"two!"})})]})]})},L=function(){return Object(f.jsxs)(S.a,{children:[Object(f.jsx)(q,{}),Object(f.jsx)(J,{})]})};var N=function(){return Object(f.jsx)(s.a,{resetCSS:!0,theme:o.theme,children:Object(f.jsx)(y,{children:Object(f.jsx)(F,{children:Object(f.jsx)(L,{})})})})};r.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(N,{})}),document.getElementById("root"))}},[[128,1,2]]]);
//# sourceMappingURL=main.6b54662e.chunk.js.map